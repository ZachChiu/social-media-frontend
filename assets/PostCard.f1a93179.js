import{_ as p,o as r,c as a,b as e,t as _,C as k,r as g,a as v,e as y,u as w,f as m,n as h,i as x,k as C}from"./index.b287f4de.js";import{d as L}from"./EmptyCard.2cbc392b.js";const b={props:{img:{type:String,default:"@/assets/img/default-user.png"},username:{type:String,default:"111"}},setup(){}},P={class:"info flex items-start"},I=e("img",{class:"w-[40px] mr-4",src:k,alt:""},null,-1),j={class:"font-bold"},B=e("p",{class:"text-xs text-gray"},"2022/1/10 12:00",-1);function M(o,n,t,s,d,c){return r(),a("div",P,[I,e("div",null,[e("p",j,_(t.username),1),B])])}var S=p(b,[["render",M]]);const T={components:{Info:S}},Y={class:"comment-card bg-white rounded-shadow p-4"},D=e("p",{class:"ml-[56px] mt-1"},"\u771F\u7684\uFF5E\u6211\u5DF2\u7D93\u6E96\u5099\u51AC\u7720\u4E86",-1);function N(o,n,t,s,d,c){const l=g("Info");return r(),a("div",Y,[v(l,{username:"\u5C0F\u5091"}),D])}var V=p(T,[["render",N]]);const $={components:{Comment:V},props:{post:{type:Object,default(){return{}}}},setup(o,{emit:n}){const t=y(),s=w(),d=u=>u.replace(`
`,"<br>"),c=m(()=>t.getters["users/user"]),l=m(()=>o.post.likes.includes(c.value._id)),i=m(()=>{let u=o.post.likes.length,f=o.post.likes.length;return l.value&&(u=`\u4F60${f-1>0?`\u548C\u5176\u4ED6 ${f-1} \u4EBA`:""}`),u});return{dayjs:L,onClickLike:()=>{o.post.isLoading||(l.value?n("unlike-post",o.post._id):n("like-post",o.post._id))},user:c,processContent:d,onClickPersonal:()=>{s.push({name:"personal-wall",params:{userId:o.post.user._id}})},getLikesText:i,hasLikePost:l,userPhoto:m(()=>t.getters["users/userPhoto"]),defaultUserImg:k}}},H={class:"post w-full p-5 card"},U={class:"post-info flex items-center mb-4"},q={class:"w-[45px] h-[45px] user-img-wrapper mr-4 rounded-full overflow-hidden"},z=["src"],A={class:"text-xs text-gray"},E=["innerHTML"],O=["src"],R={key:0,class:"fa-solid fa-spinner text-primary animate-spin-slow text-[20px]"},F={key:2,class:"ml-2 group-hover:text-primary"},G={key:3,class:"ml-2 group-hover:text-primary"},J={class:"flex items-center mt-4"},K=["src"],Q=e("div",{class:"w-full h-full flex rounded-shadow overflow-hidden"},[e("textarea",{name:"content",id:"content",rows:"1",placeholder:"\u8AAA\u9EDE\u4EC0\u9EBC...",required:"",autofocus:"",autocomplete:"off",class:"py-1 px-2 rounded-r-none"}),e("button",{class:"btn-secondary block text-white w-[100px] font-[20px] outline-none rounded-l-none"}," \u7559\u8A00 ")],-1);function W(o,n,t,s,d,c){const l=g("Comment");return r(),a("div",H,[e("div",U,[e("div",q,[e("img",{class:h(["w-full h-full object-cover",{"p-2":!t.post.user.photo}]),src:t.post.user.photo||s.defaultUserImg,alt:""},null,10,z)]),e("div",null,[e("p",{class:"link cursor-pointer",onClick:n[0]||(n[0]=(...i)=>s.onClickPersonal&&s.onClickPersonal(...i))},_(t.post.user.name),1),e("p",A,_(s.dayjs(t.post.createdAt).format("YYYY/MM/DD mm:ss")),1)])]),e("div",{class:"content",innerHTML:s.processContent(t.post.content)},null,8,E),t.post.image?(r(),a("img",{key:0,class:"w-full mt-4 rounded-shadow",src:t.post.image,alt:""},null,8,O)):x("",!0),e("div",{class:"group likes mt-4 cursor-pointer flex items-center w-fit",onClick:n[1]||(n[1]=(...i)=>s.onClickLike&&s.onClickLike(...i))},[t.post.isLoading?(r(),a("i",R)):(r(),a("i",{key:1,class:h(["fa-regular fa-thumbs-up transition group-hover:text-primary text-[20px]",{"text-primary":s.hasLikePost}])},null,2)),t.post.likes.length?(r(),a("span",F,_(s.getLikesText),1)):(r(),a("span",G,"\u6210\u70BA\u7B2C\u4E00\u500B\u6309\u8B9A\u7684\u670B\u53CB"))]),e("div",J,[e("img",{class:"w-[40px] mr-4 rounded-full",src:s.userPhoto,alt:""},null,8,K),Q]),t.post.comment?(r(),C(l,{key:1,class:"mt-4"})):x("",!0)])}var se=p($,[["render",W]]);export{se as P};
