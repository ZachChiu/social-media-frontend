import{P as g}from"./PostCard.f1a93179.js";import{L as f,E as u}from"./EmptyCard.2cbc392b.js";import{p as i}from"./posts.4104fa84.js";import{_ as y,d as L,l as P,g as _,m as C,q as v,r as l,o as d,k as p}from"./index.b287f4de.js";const w={components:{PostCard:g,LoadingCard:f,EmptyCard:u},setup(){const c=L(),t=P();let e=_({}),o=C(!0);const k=async()=>{try{o.value=!0;const s=await i.getPost(c.params.postId);Object.assign(e,s)}catch{t.error("\u67E5\u7121\u8CBC\u6587")}finally{o.value=!1}},m=async(s,r)=>{let a={};e.isLoading=!0;try{r==="like"?a=await i.likePost(s):a=await i.unlikePost(s),e.likes=a.data.likes}catch{t.error(r==="like"?"\u53D6\u6D88\u6309\u8B9A\u5931\u6557":"\u6309\u8B9A\u5931\u6557")}finally{e.isLoading=!1}};return v(()=>{k()}),{post:e,isLoading:o,toggleLike:m}}};function E(c,t,e,o,k,m){const s=l("LoadingCard"),r=l("EmptyCard"),a=l("PostCard");return o.isLoading?(d(),p(s,{key:0})):o.post._id?(d(),p(a,{key:2,post:o.post,onUnlikePost:t[0]||(t[0]=n=>o.toggleLike(n,"unlike")),onLikePost:t[1]||(t[1]=n=>o.toggleLike(n,"like"))},null,8,["post"])):(d(),p(r,{key:1}))}var q=y(w,[["render",E]]);export{q as default};
