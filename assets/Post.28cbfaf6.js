import{_ as u,j as _,u as g,k as x,r as b,a as h,o as l,c,d as y,b as t,n as i,p as d,y as v,F as w,f as m}from"./index.a4073ed6.js";import{T as k}from"./Title.037e12a7.js";import{p as T}from"./posts.9616cb94.js";const P={components:{Title:k},setup(){const r=_(),o=g();let s=x(!1);const e=b({image:null,content:null});return{form:e,createPost:async()=>{if(!s.value){if(!e.content){r.error("\u5167\u5BB9\u4E0D\u5B8C\u5168");return}try{s.value=!0;const n={content:e.content};e.image&&(n.image=e.image),await T.createPost(n),r.success("\u767C\u6587\u6210\u529F!"),o.push({name:"posts-wall"})}catch{r.error("\u767C\u6587\u5931\u6557")}finally{s.value=!1}}},isLoading:s}}},V={class:"card p-8"},N=t("label",{class:"block mb-2",for:"content"},"\u8CBC\u6587\u5167\u5BB9",-1),j={class:"flex mt-4"},B=t("label",{class:"w-32 md:w-24 text-white bg-dark rounded-shadow py-1 text-center cursor-pointer"},[m("\u4E0A\u50B3\u5716\u7247 "),t("span",{class:"sr-only"}),t("input",{type:"file",class:"hidden",accept:".png, .jpg, .jpeg"})],-1),C=["src"],F=m(" \u9001\u51FA\u8CBC\u6587 "),L={key:0,class:"fa-solid fa-spinner animate-spin ml-1"};function U(r,o,s,e,p,n){const f=h("Title");return l(),c(w,null,[y(f,{title:"\u5F35\u8CBC\u52D5\u614B"}),t("div",V,[N,i(t("textarea",{name:"content",id:"content",rows:"5",placeholder:"\u8ACB\u8F38\u5165\u8CBC\u6587\u5167\u5BB9",required:"",autofocus:"",autocomplete:"off","onUpdate:modelValue":o[0]||(o[0]=a=>e.form.content=a),class:"py-4 px-5"},null,512),[[d,e.form.content]]),t("div",j,[B,i(t("input",{type:"text",class:"ml-2 flex-1 px-2",placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u7DB2\u5740","onUpdate:modelValue":o[1]||(o[1]=a=>e.form.image=a)},null,512),[[d,e.form.image]])]),(l(),c("img",{key:0,class:"w-full mt-4 rounded-shadow",src:e.form.image,alt:""},null,8,C)),t("button",{class:"bg-secondary text-dark hover:text-white hover:bg-primary disabled:bg-disabled disabled:text-white w-[323px] font-bold mx-auto mt-8 py-4 block card",disabled:"",onClick:o[2]||(o[2]=(...a)=>e.createPost&&e.createPost(...a))},[F,e.isLoading?(l(),c("i",L)):v("",!0)])])],64)}var M=u(P,[["render",U]]);export{M as default};
