import{_ as p,l as _,u as g,m as h,r as w,a as x,o as l,c,d as b,b as t,q as i,s as d,j as v,F as y,f as m}from"./index.744117a2.js";import{T as k}from"./Title.6bed966e.js";import{p as T}from"./posts.9616cb94.js";const P={components:{Title:k},setup(){const n=_(),o=g();let s=h(!1);const e=w({image:null,content:null});return{form:e,createPost:async()=>{if(!s.value){if(!e.content){n.error("\u5167\u5BB9\u4E0D\u5B8C\u5168");return}try{s.value=!0;const r={content:e.content};e.image&&(r.image=e.image),await T.createPost(r),n.success("\u767C\u6587\u6210\u529F!"),o.push({name:"posts-wall"})}catch{n.error("\u767C\u6587\u5931\u6557")}finally{s.value=!1}}},isLoading:s}}},V={class:"card p-8"},N=t("label",{class:"block mb-2",for:"content"},"\u8CBC\u6587\u5167\u5BB9",-1),j={class:"flex mt-4"},B=t("label",{class:"w-32 md:w-24 text-white bg-dark rounded-shadow py-1 text-center cursor-pointer"},[m("\u4E0A\u50B3\u5716\u7247 "),t("span",{class:"sr-only"}),t("input",{type:"file",class:"hidden",accept:".png, .jpg, .jpeg"})],-1),C=["src"],q=m(" \u9001\u51FA\u8CBC\u6587 "),F={key:0,class:"fa-solid fa-spinner animate-spin ml-1"};function L(n,o,s,e,u,r){const f=x("Title");return l(),c(y,null,[b(f,{title:"\u5F35\u8CBC\u52D5\u614B"}),t("div",V,[N,i(t("textarea",{name:"content",id:"content",rows:"5",placeholder:"\u8ACB\u8F38\u5165\u8CBC\u6587\u5167\u5BB9",required:"",autofocus:"",autocomplete:"off","onUpdate:modelValue":o[0]||(o[0]=a=>e.form.content=a),class:"w-full rounded-shadow py-4 px-5 outline-none resize-none"},null,512),[[d,e.form.content]]),t("div",j,[B,i(t("input",{type:"text",class:"ml-2 w-full flex-1 outline-none shadow-md px-2 rounded-shadow",placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u7DB2\u5740","onUpdate:modelValue":o[1]||(o[1]=a=>e.form.image=a)},null,512),[[d,e.form.image]])]),(l(),c("img",{key:0,class:"w-full mt-4 rounded-shadow",src:e.form.image,alt:""},null,8,C)),t("button",{class:"bg-secondary text-dark hover:text-white hover:bg-primary disabled:bg-disabled w-[323px] font-bold mx-auto mt-8 py-4 block card",onClick:o[2]||(o[2]=(...a)=>e.createPost&&e.createPost(...a))},[q,e.isLoading?(l(),c("i",F)):v("",!0)])])],64)}var E=p(P,[["render",L]]);export{E as default};
